\documentclass[10pt,a4paper]{article}
\usepackage{CJKutf8}
\renewcommand{\tablename}{表}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{float}
\usepackage{multicol}
\usepackage{listings}
\usepackage{xcolor}
\usepackage[colorlinks]{hyperref}
\usepackage{caption}
\definecolor{grey}{rgb}{0.8,0.8,0.8}
\definecolor{darkgreen}{rgb}{0,0.3,0}
\definecolor{darkblue}{rgb}{0,0,0.3}
\lstset{%
    numbers=left, %行号
    numberstyle=\scriptsize\color{grey},
    showstringspaces=false,
    showspaces=false,%
    tabsize=4,%
    frame=shadowbox,%
    basicstyle={\ttfamily\normalsize},%
    keywordstyle=\color{blue!80!black}\bfseries,%
    identifierstyle=,%
    commentstyle=\color{green!50!blue}\itshape,%
    stringstyle=\color{green!50!black},%
    rulesepcolor=\color{gray!20!white},
    breaklines,
    columns=flexible,
    extendedchars=false,
    %mathescape=true,
    language=[x86masm]Assembler,
}
\providecommand{\code}[2]{\lstinputlisting[caption=\href{run:code/#1}{\ttfamily #1}]{code/#1}}
\usepackage{enumitem}
\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable,raster}
\usepackage{array}
\tcbset{fonttitle=\bfseries,breakable,
	colback=white,
	every box/.style={enhanced,
		before=\par\smallskip,after=\par\smallskip},
	every box on layer 2/.style={reset,every box,colback=yellow!10!white,
		drop fuzzy shadow}}
\geometry{left=1cm,right=1cm,top=1cm,bottom=1.5cm}
\graphicspath{{img/}}
%\def\img#1#2{\begin{figure}[htb]\centering\includegraphics[width=0.7\columnwidth]{img/#1.png}\caption{#2}\label{fig:#1}\end{figure}}
\def\img#1#2{\begin{tcolorbox}[title=#2]\includegraphics[width=\textwidth]{#1.png}\end{tcolorbox}}
\def\pdf#1#2{\begin{tcolorbox}[title=#2]\includegraphics[width=\textwidth]{#1.pdf}\end{tcolorbox}}
\setlist{nosep}
\begin{document}
	\begin{CJK}{UTF8}{song}
	\title{计算机组成}
	\date{}
	\begin{multicols}{3}
		\maketitle
		\section{微机}
		\input{chapter/micro.tex}
		\section{存储与I/O}
		\input{chapter/memio.tex}
		\section{80x86}
		\input{chapter/8086.tex}
	\end{multicols}
	\begin{twocolumn}
%		\begin{multicols}{3}
%		\begin{tcbraster}[raster columns=3, raster equal height,
%			]
		\img{von}{冯诺依曼结构}
		\img{harvard}{哈佛结构}
		\img{struct}{微机结构}
		\img{sysstruct}{微机系统结构（哈佛结构）}
		\img{memhier}{内存层级}
		\img{memorg}{内存组织}
		\begin{tcolorbox}[title=总线结构]
		\img{singlebus}{单线结构}
		\img{dualbus}{CPU-Central 双线结构}
		\img{memdualbus}{Memory-Central 双线结构}
		\end{tcolorbox}
		\begin{tcolorbox}[title=寻址方式]
			\img{memio}{存储器映像寻址方式}
			\begin{tcolorbox}[title=I/O单独编址方式]
				\img{isoiod}{单工地址线}
				\img{isoiom}{多工地址线}
			\end{tcolorbox}
		\end{tcolorbox}
		\begin{tcolorbox}[title=RAM]
%			\begin{tcbraster}[raster columns=2,raster equal height=rows,]
%				\img{DRAM}{DRAM}
%				\img{SRAM}{SRAM}
%			\end{tcbraster}
			\includegraphics[width=\textwidth]{RAM.pdf}
		\end{tcolorbox}
		\pdf{DRAM16}{4M$\times$4 DRAM}
		\pdf{pkg}{存储芯片封装}
		\begin{tcolorbox}[title=存储位扩展]
			\pdf{bitext}{256K$\times$8-bit: 8 256$\times$1-bit}
			\img{bitext}{256K$\times$32-bit: 32 256K$\times$1-bit}
		\end{tcolorbox}
		\begin{tcolorbox}[title=存储字扩展]
			\pdf{wordext}{1M$\times$8-bit: 4 group 256K$\times$1-bit}
			\img{wordext}{2M$\times$8-bit: 8 group 256K$\times$8-bit}
		\end{tcolorbox}
		\begin{tcolorbox}[title=字与位同时扩展]
			\img{wbext}{32位可寻址单元}
			\img{wbextb}{1字节可寻址单元}
		\end{tcolorbox}
		\pdf{pref}{外设}
		\pdf{iomod}{I/O模块}
		\pdf{interrupt}{中断处理内存变化}
		\pdf{DMAalter}{DMA架构}
		\img{8086}{8086内部结构}
		\img{8086l}{8086配置图}
		\begin{tcolorbox}[title=逻辑门电路]
			\centering
			\includegraphics[width=0.75\textwidth]{CMOS.png}
%			\includegraphics[width=\textwidth]{logic.jpg}
			\begin{tabular}{|c|c|c|c|c|c|c|c|}
				\hline
				\multicolumn{2}{|c|}{input} & \multicolumn{6}{c|}{output} \\
				\hline
				$ a $ & $ b $  & $ ab $ & $ a+b $ & $ \overline{ab} $ & $ \overline{a+b} $& $\overline{a}$ & $a\oplus b$ \\
				\hline
				0 & 0 & 0 & 0 & 1 & 1 & 1 & 0 \\
				\hline
				0 & 1 & 0 & 1 & 1 & 0 & 1 & 1 \\
				\hline
				1 & 0 & 0 & 1 & 1 & 0 & 0 & 1 \\
				\hline
				1 & 1 & 1 & 1 & 0 & 0 & 0 & 0 \\
				\hline
			\end{tabular}
		\end{tcolorbox}
		\begin{tcolorbox}[title=锁存器和数据传输器]
			\img{latch}{74LS373 D Latch}
			\img{dt}{Data Bus Transceiver}
		\end{tcolorbox}
		\img{buscycle}{8086/88 总线周期}
%		\end{tcbraster}
%		\end{multicols}
	\end{twocolumn}
	\end{CJK}
	% \begin{CJK}{UTF8}{song}
	% 	\code{simpleio.asm}
	% \end{CJK}
\end{document}